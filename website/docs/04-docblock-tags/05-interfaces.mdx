import GratsCode from "@site/src/components/GratsCode";
import InterfaceDeclaration from "!!raw-loader!./snippets/04-interface-declaration.out";
import NodeInterface from "!!raw-loader!./snippets/04-merged-interface-renaming.out";
import InterfaceImplementingInterface from "!!raw-loader!./snippets/04-interface-implement-interface.out";
import InterfaceFieldCommonImpl from "!!raw-loader!./snippets/04-interface-field-common-impl.out";
import InterfaceOverrideFieldImpl from "!!raw-loader!./snippets/04-interface-override-field-impl.out";

# Interfaces

GraphQL interfaces can be defined by placing a `@gqlInterface` docblock directly before an:

- Interface declaration

<GratsCode out={InterfaceDeclaration} mode="ts" />

## Shared Field Implementation

If you wish to define field which has a single implementation that is shared by all implementors, you can use the [function style of `@gqlField`](./02-fields.mdx#functional-style-fields) to define the field. This will automatically add the field to all implementors of the interface.

<GratsCode out={InterfaceFieldCommonImpl} mode="both" />

## Types Implementing Interfaces

To declare that a **type implements an interface**, see the [Implementing Interfaces](./01-types.mdx#implementing-interfaces) section of the Types docs.

## Interfaces Implementing Interfaces

To declare that an interface implements another interface, you can use TypeScript's `extends` keyword:

<GratsCode out={InterfaceImplementingInterface} mode="ts" />

Which will generate the following GraphQL schema:

<GratsCode out={InterfaceImplementingInterface} mode="gql" />

## Overriding Interface Fields

Unlike GraphQL, when you add a field to an interface with `/** @gqlField */`, the field will be automatically be added to the GraphQL definitions of all the implementors of the interface.

If you wish to override the field in a specific implementor, you can add a `/** @gqlField */` with the same name to the implementor.

<GratsCode out={InterfaceOverrideFieldImpl} mode="ts" />

## Merged Interfaces

TypeScript [merges interfaces](https://www.typescriptlang.org/docs/handbook/declaration-merging.html#merging-interfaces) if you to define multiple interfaces with the same name in the same scope. For example, `Node` is a built-in interface that describes DOM nodes. So, if you define a `Node` interface in your code, TypeScript will merge your interface with the built-in one.

To avoid ambiguity, Grats will error if you try to define a GraphQL interface using a merged TypeScript interface. To avoid this error you can define a new interface, with a unique name, and then [rename](../03-resolvers/04-renaming.mdx) it to the name you want to use in your schema.

<GratsCode out={NodeInterface} mode="ts" />
